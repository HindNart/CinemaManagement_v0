<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng ký tài khoản</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/regis.css">
    <script>
        function validateForm(event) {
            const password = document.getElementById("password").value;
            const confirmPassword = document.getElementById("confirmPassword").value;
            const passwordError = document.getElementById("passwordError");
            const confirmPasswordError = document.getElementById("confirmPasswordError");
            
            let valid = true;
            passwordError.textContent = '';
            confirmPasswordError.textContent = '';

            if (password.length < 8) {
            	passwordError.textContent = '*Mật khẩu phải nhiều hơn 8 ký tự';
                valid = false;
            }

            if (password !== confirmPassword) {
            	confirmPasswordError.textContent = '*Mật khẩu không khớp';
                valid = false;
            }

            if (!valid) {
                event.preventDefault();
                alert(errorMessage);
            }
        }
        function resetForm() {
            document.getElementById("registerForm").reset();
        }
    </script>
    
</head>

<body>
    <form class="container flex spc-btw" th:action="@{/saveAccount}" id="registerForm"  th:object="${account}" method="POST" onsubmit="validateForm(event)">
        <div class="w-40 regis-content">
            <h3 class="text-center">Đăng ký</h3>
            <div th:if="${successMessage != null}">
                <script th:inline="javascript">
                    alert([[ ${successMessage} ]]);
                    resetForm();
                </script>
            </div>
            <div class="mb-3">
                <label for="exampleFormControlInput1" class="form-label">Địa chỉ email</label>
                <input type="email"  th:field="*{email}" class="form-control" id="email" placeholder="Email...">
            </div>
            	<p th:if="${exists!=null}">
                <span class="text-red">*Địa chỉ email đã được sử dụng</span>
            </p>
            
            <div class="mb-3">
                <label for="exampleFormControlInput1" class="form-label">Tên người dùng</label>
                <input type="text"  th:field="*{username}" class="form-control" placeholder="Username...">
            </div>
            <div class="mb-3">
                <label for="exampleFormControlInput1" class="form-label">Mật khẩu</label>
                <input type="password"  th:field="*{password}" class="form-control" id="password" placeholder="Mật khẩu...">
                <p id="passwordError" class="text-red"></p>
            </div>
            <div class="mb-3">
                <label for="exampleFormControlInput1" class="form-label">Nhập lại mật khẩu</label>
                <input type="password" class="form-control" id="confirmPassword" placeholder="Nhập lại mật khẩu...">
                <p id="confirmPasswordError" class="text-red"></p>
            </div>
            
            <div class="mb-3  float-start">
                <a th:href="@{/login}" class="btn btn-secondary">Quay lại</a>
            </div>
            <div class="mb-3  float-end">
                <input type="submit" class="btn btn-primary" value="Đăng ký">
            </div>
            
        </div>
        <div class="">
            <img src="https://i.pinimg.com/736x/ee/6f/17/ee6f1732baf7af77e549c39f03727c89.jpg" alt="" width="350px">
        </div>
    </form>
</body>

</html>
