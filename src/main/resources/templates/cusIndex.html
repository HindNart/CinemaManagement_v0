<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/png" href="./img/film.png" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="/css/cusStyle.css">
    <title>ƒê·∫∑t v√© xem phim</title>
    <style>
    	#header.light-mode {
        background-color: #f8f9fa;
        color: #212529;
	    }
	
	    /* Dark Mode */
	    #header.dark-mode {
	        background-color: #212529;
	        color: #f8f9fa;
	    }
	
	    /* Adjust user dropdown content text color */
	    #header.light-mode .dropdown-content a,
	    #header.dark-mode .dropdown-content a {
	        color: inherit; /* Use inherited color */
	    }
	    
	    #header.light-mode.user-name span,
	    #header.dark-mode.user-name span{
	    	color: inherit;
	    }
	
	    /* Adjust chevron icon color */
	    #header.light-mode .bi-chevron-compact-down,
	    #header.dark-mode .bi-chevron-compact-down {
	        color: inherit; /* Use inherited color */
	    }
    </style>
    
</head>

<body>
	<script>
	    function toggleHeaderMode() {
	        const header = document.getElementById('header');
	        const toggleButton = document.getElementById('toggleButton');
	        const icon = toggleButton.querySelector('i');
	
	        if (header.classList.contains('light-mode')) {
	            header.classList.remove('light-mode');
	            header.classList.add('dark-mode');
	            toggleButton.classList.remove('btn-outline-dark');
	            toggleButton.classList.add('btn-outline-light');
	            icon.classList.remove('bi-brightness-high');
	            icon.classList.add('bi-moon');
	        } else {
	            header.classList.remove('dark-mode');
	            header.classList.add('light-mode');
	            toggleButton.classList.remove('btn-outline-light');
	            toggleButton.classList.add('btn-outline-dark');
	            icon.classList.remove('bi-moon');
	            icon.classList.add('bi-brightness-high');
	        }
	    }

	</script>
    <div>
        <div id="header" class="light-mode row d-flex align-items-center">
            <div class="navbar">
                <div id="logo" class="col-3 ms-5">
		            <img src="./img/LET.png" alt="">
		        </div>
                <div class="user me-5 flex">
				    <div class="user-avt">
				        <img class="brr-50" src="https://www.iconpacks.net/icons/2/free-user-icon-3296-thumb.png" alt="" width="50px" height="50px">
				    </div>
                <div class="nav-content">
                    <ul>
                        <li class="nav-dropdown">L·ªãch chi·∫øu
                            <div class="dropdown-content">
                                <a href="#">Phim ƒëang chi·∫øu</a>
                                <a href="#">Phim s·∫Øp chi·∫øu</a>
                            </div>
                        </li>
                        <li>Phim chi·∫øu</li>
                        <li>Review phim</li>
                    </ul>
                </div>
                <div class="user flex">
				    <div class=" nav-dropdown flex">
				    	<div class="user-avt">
					        <img class="brr-50" src="https://www.iconpacks.net/icons/2/free-user-icon-3296-thumb.png" alt="" width="50px" height="50px">
					    </div>
					    <div class="user-name nav-dropdown me-4" th:classappend="${account != null} ? 'light-mode' : 'dark-mode'">
					        <span th:if="${account != null}" th:text="${account.username}">
					        </span>
					        <div class="dropdown-content rounded">
					            <a data-bs-toggle="modal" class="rounded" data-bs-target="#exampleModal" style="cursor: pointer;">Th√¥ng tin</a>
					            <a th:href="@{/logout}" class="rounded">ƒêƒÉng xu·∫•t</a>
					        </div>
					    </div>
				    </div>
				    <!-- Toggle button -->
				    <button id="toggleButton" class="btn btn-outline-dark rounded-circle" onclick="toggleHeaderMode()">
				        <i class="bi bi-brightness-high"></i>
				    </button>
				</div>                
            </div>            
        </div>
        </div>
        </div>
        <div id="slider" class="mt-5 mb-5">
		        <div id="carouselExampleControlsNoTouching" class="carousel slide" data-bs-touch="false">
		            <div class="carousel-inner">
		                <div class="carousel-item active" data-bs-interval="3000">
		                    <img src="img/sli1.jpg" class="d-block w-100" alt="Slider">
		                </div>
		                <div class="carousel-item" data-bs-interval="3000">
		                    <img src="img/sli2.jpg" class="d-block w-100" alt="Slider">
		                </div>
		                <div class="carousel-item">
		                    <img src="img/sli3.jpg" class="d-block w-100" alt="Slider">
		                </div>
		            </div>
		            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControlsNoTouching"
		                data-bs-slide="prev">
		                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
		                <span class="visually-hidden">Previous</span>
		            </button>
		            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControlsNoTouching"
		                data-bs-slide="next">
		                <span class="carousel-control-next-icon" aria-hidden="true"></span>
		                <span class="visually-hidden">Next</span>
		            </button>
		        </div>
		    </div>
		
        <div id="now-showing">
            <div class="now-showing-background">
                <div class="now-showing-title">
                    <h1>Phim ƒëang chi·∫øu</h1>
                </div>
                <img src="./img/momo-upload-api-210701105436-637607336767432408.jpg" alt="">
            </div>
            <div class="now-showing-list">
                 <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
		    <div class="carousel-inner">
		        <!-- Carousel Item 1 -->
		        <div class="carousel-item active " data-bs-interval="10000">
		            <div class="row justify-content-around mx-5">
		                <div class="now-showing-items col-2" th:each="movie, iterStat : ${movies}" th:if="${iterStat.index < 5}">
		                    <!-- Th√™m m√£ HTML c·ªßa phim v√†o ƒë√¢y -->
		                    <div class="now-showing-img">
		                        <a th:href="@{/film/{id}(id=${movie.idPhim})}">
		                            <img th:src="${movie.LinkPoster}" alt="" width="200px" height="300px">
		                        </a>
		                    </div>
		                    <div class="now-showing-name">
		                        <p th:text="${movie.tenPhim}"></p>
		                    </div>
		                    <div class="now-showing-category">
		                        <p th:text="${movie.theLoai}"></p>
		                    </div>
		                    <div class="now-showing-rate">üåü<span th:text="${#numbers.formatDecimal(averageRatings[movie.idPhim], 1, 1)}"></span>
							</div>
		                </div>
		            </div>
		        </div>
		        <!-- Carousel Item 2, 3, ... -->
		        <!-- Chia nh√≥m phim th√†nh c√°c carousel-item m·ªõi -->
		        <div class="carousel-item" data-bs-interval="10000">
		            <div class="row justify-content-around mx-5">
		                <div class="now-showing-items col-2" th:each="movie, iterStat : ${movies}" th:if="${iterStat.index >= 5 and iterStat.index < 10}">
		                    <!-- Th√™m m√£ HTML c·ªßa phim v√†o ƒë√¢y -->
		                    <div class="now-showing-img">
		                        <a th:href="@{/film/{id}(id=${movie.idPhim})}">
		                            <img th:src="${movie.LinkPoster}" alt="" width="200px" height="300px">
		                        </a>
		                    </div>
		                    <div class="now-showing-name">
		                        <p th:text="${movie.tenPhim}"></p>
		                    </div>
		                    <div class="now-showing-category">
		                        <p th:text="${movie.theLoai}"></p>
		                    </div>
		                    <div class="now-showing-rate">üåü<span th:text="${#numbers.formatDecimal(averageRatings[movie.idPhim], 1, 1)}"></span></div>
		                </div>
		            </div>
		        </div>
		    </div>
		    <!-- N√∫t ƒëi·ªÅu khi·ªÉn slide -->
		    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
		        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
		        <span class="visually-hidden">Previous</span>
		    </button>
		    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
		        <span class="carousel-control-next-icon" aria-hidden="true"></span>
		        <span class="visually-hidden">Next</span>
		    </button>
		</div>

		
            </div>
        </div>
        
        
        <!-- User section -->
        
        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog md">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h1 class="modal-title fs-5" id="exampleModalLabel">Th√¥ng tin t√†i kho·∫£n</h1>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		      <div class="modal-body">
		      
		        <form th:action="@{/updateAccount}" th:object="${account}" method="post">
					  <div class="row mb-3">
					    <label for="inputEmail3" class="col-sm-3 col-form-label">Email:</label>
					    <div class="col-sm-9">
					      <input type="email" class="form-control" id="inputEmail3" th:field="*{email}" th:value="${account.email}"required>
					    </div>
					  </div>
					  <div class="row mb-3">
					    <label for="username" class="col-sm-3 col-form-label">Username:</label>
					    <div class="col-sm-9">
					      <input type="text" class="form-control" id="username" th:field="*{username}" th:value="${account.username}" required>
					    </div>
					  </div>
					  
					  
					  <div class="row mb-3">
					    <label for="inputPassword3" class="col-sm-3 col-form-label">Password:</label>
					    <div class="col-sm-9">
					      <input type="password" class="form-control" id="inputPassword3" th:field="*{password}" th:value="${account.password}"
					       pattern=".{8,}" title="Password ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±" required>
					    </div>
					  </div>
					  <div class="row mb-3">
					    <label for="inputPassword3" class="col-sm-3 col-form-label">ƒêi·ªÉm:</label>
					    <div class="col-sm-9">
					      <input type="text" class="form-control" id="" th:value="${account.diem}" th:field="*{diem}" readonly>
					    </div>
					  </div>
					  <button type="submit" class="btn btn-primary float-end">L∆∞u</button>
				</form>
		      </div>
		    </div>
		  </div>
		</div>
       
        <div id="footer" class=" bg-dark p-3 pt-5">
        <div class="row p-64  ms-5 me-5 text-white border-bottom">
            <div class="col mb-4">
                <div class="title-footer"> <b>Gi·ªõi thi·ªáu</b>
                    <ul class="mt-3">
                        <li><a href="#">V·ªÅ ch√∫ng t√¥i</a></li>
                        <li><a href="#">Th·ªèa thu·∫≠n s·ª≠ d·ª•ng</a></li>
                        <li><a href="#">Quy ch·∫ø ho·∫°t ƒë·ªông</a></li>
                        <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                    </ul>
                </div>
            </div>
            <div class="col">
                <div class="title-footer"> <b>G√≥c ƒëi·ªán ·∫£nh</b>
                    <ul class="mt-3">
                        <li><a href="#">Th·ªÉ lo·∫°i phim</a></li>
                        <li><a href="#">B√¨nh lu·∫≠n phim</a></li>
                        <li><a href="#">Phim hay c·ªßa th√°ng </a></li>
                    </ul>
            </div>
            </div>
            <div class="col">
                <div class="title-footer"> <b>H·ªó tr·ª£</b>
                    <ul class="mt-3">
                        <li><a href="#">Sales</a></li>
                        <li><a href="#">R·∫°p</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
            </div>
            <div class="col">
                <div id="logo" class="col-3">
                    <img src="./img/LET.png" alt="" class="">
                    <div class="row">
                        <div class="col-4 fs-3"><i class="bi bi-facebook"></i></div>
                        <div class="col-4 fs-3"><i class="bi bi-youtube"></i></div>
                        <div class="col-4 fs-3"><i class="bi bi-instagram"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
